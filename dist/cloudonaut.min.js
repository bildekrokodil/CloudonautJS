!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports):"function"==typeof define&&define.amd?define(["exports"],a):a((t="undefined"!=typeof globalThis?globalThis:t||self).cloudonaut={})}(this,(function(t){"use strict";function a(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function e(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}function i(t,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),a&&n(t,a)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,a){return(n=Object.setPrototypeOf||function(t,a){return t.__proto__=a,t})(t,a)}function c(t,a){return!a||"object"!=typeof a&&"function"!=typeof a?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):a}function s(t){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=p(t);if(a){var i=p(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return c(this,e)}}var h=function t(e){a(this,t),e=e||{},this.level=e.level||0,this.leaderboardID=e.leaderboardID||0,this.startDate=e.startDate||"",this.endDate=e.endDate||"",this.periodicity=e.periodicity||"",this.function=e.function||"MAX",this.sort=e.sort||""},l=function(t){i(r,t);var e=s(r);function r(t,i,p,n,c,s){var h;return a(this,r),(h=e.call(this,c)).appID=t,h.appSecret=i,h.controller="Leaderboard",h.action="List",h.page=s.page||1,h.limit=s.limit||0,h.playerID=p,h.characterID=n,h}return r}(h),o=function(t){i(r,t);var e=s(r);function r(t,i,p){var n;return a(this,r),(n=e.call(this,p)).appID=t,n.appSecret=i,n.controller="Leaderboard",n.action="Count",n}return r}(h),u=function(t){i(r,t);var e=s(r);function r(t,i,p,n,c){var s;return a(this,r),(s=e.call(this,n)).appID=t,s.appSecret=i,s.controller="Leaderboard",s.action="ListFriends",s.page=c.page||1,s.limit=c.limit||0,s.playerID=p.playerID,s.playerSecret=p.playerSecret,s}return r}(h),y=function(t){i(r,t);var e=s(r);function r(t,i,p,n){var c;return a(this,r),(c=e.call(this,n)).appID=t,c.appSecret=i,c.controller="Leaderboard",c.action="CountFriends",c.playerID=p.playerID,c.playerSecret=p.playerSecret,c}return r}(h),f=function(t){i(r,t);var e=s(r);function r(t,i,p,n,c,s){var h;return a(this,r),(h=e.call(this,c)).appID=t,h.appSecret=i,h.controller="Leaderboard",h.action="Add",h.playerID=p.playerID,h.playerSecret=p.playerSecret,h.characterID=n,h.score=s,h}return r}(h),D=function(t){i(r,t);var e=s(r);function r(t,i,p,n,c){var s;return a(this,r),(s=e.call(this,c)).appID=t,s.appSecret=i,s.controller="Leaderboard",s.action="Get",s.playerID=p,s.characterID=n,s}return r}(h),v=function t(e){a(this,t),e=e||{},this.latitude=e.latitude||e.lat||"",this.longitude=e.longitude||e.long||""},d=function t(e){a(this,t),e=e||{},this.limit=e.limit||0,this.page=e.page||1},I=function t(e){a(this,t),e=e||{},this.providerUID=e.providerUID||"",this.playerID=e.playerID||0,this.playerSecret=e.playerSecret||"",this.displayName=e.displayName||"",this.displayNameExtra=e.displayNameExtra||"",this.avatar=""},S=function t(e){a(this,t),e=e||{},this.characterID=e.characterID||0,this.characterName=e.characterName||"",this.characterNameExtra=e.characterNameExtra||"",this.characterAvatar=e.characterAvatar||""},m=function t(e,r,i){a(this,t),this.appID=e,this.appSecret=r,this.controller="Auth",this.action="Authenticate",this.providerUID=i.providerUID,this.displayName=i.displayName,this.displayNameExtra=i.displayNameExtra},C=function(t){i(r,t);var e=s(r);function r(t,i,p){var n;return a(this,r),(n=e.call(this,t,i,p)).provider=0,n}return r}(m),A=function(t){i(r,t);var e=s(r);function r(t,i,p){var n;return a(this,r),(n=e.call(this,t,i,p)).provider=1,n.playerID=p.playerID,n.playerSecret=p.playerSecret,n}return r}(m),k=function(t){i(r,t);var e=s(r);function r(t,i,p){var n;return a(this,r),(n=e.call(this,t,i,p)).provider=2,n.playerID=p.playerID,n.playerSecret=p.playerSecret,n}return r}(m),P=function(){function t(e){a(this,t),this.api=e}return r(t,[{key:"ApiCall",value:function(t){return fetch(this.api.url,{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(t){if(!t.ok||200!==t.status)throw Error(t.statusText);return t.json()})).catch((function(t){throw t}))}}]),t}(),w=function(t){i(p,t);var e=s(p);function p(t){return a(this,p),e.call(this,t)}return r(p,[{key:"Anonymous",value:function(){var t=this,a=new C(this.api.appID,this.api.appSecret,this.api.player);return this.ApiCall(a).then((function(a){return a.success&&(t.api.player.playerID=a.player.playerID,t.api.player.playerSecret=a.player.playerSecret,t.api.player.displayName=a.player.displayName,t.api.player.displayNameExtra=a.player.displayNameExtra),a}))}},{key:"WithFacebook",value:function(t){var a=this;this.api.player.playerSecret=t||this.api.player.playerSecret;var e=new A(this.api.appID,this.api.appSecret,this.api.player);return this.ApiCall(e).then((function(t){return t.success&&(a.api.player.playerID=t.player.playerID,a.api.player.playerSecret=t.player.playerSecret,a.api.player.displayName=t.player.displayName,a.api.player.displayNameExtra=t.player.displayNameExtra),t}))}},{key:"WithFirebase",value:function(t){var a=this;this.api.player.playerSecret=t||this.api.player.playerSecret;var e=new k(this.api.appID,this.api.appSecret,this.api.player);return this.ApiCall(e).then((function(t){return t.success&&(a.api.player.playerID=t.player.playerID,a.api.player.playerSecret=t.player.playerSecret,a.api.player.displayName=t.player.displayName,a.api.player.displayNameExtra=t.player.displayNameExtra),t}))}}]),p}(P),g=function(t){i(p,t);var e=s(p);function p(t,r,i){var n;return a(this,p),r=r||{},i=i||{},(n=e.call(this,t)).data=new h(r),n.paging=new d(i),n}return r(p,[{key:"ListScores",value:function(t){t=(t=t||{})instanceof d?t:this.paging;var a=new l(this.api.appID,this.api.appSecret,0,0,this.data,t);return this.ApiCall(a)}},{key:"ListScoresAroundMe",value:function(t){t=(t=t||{})instanceof d?t:this.paging;var a=new l(this.api.appID,this.api.appSecret,this.api.player.playerID,this.api.character.characterID,this.data,t);return this.ApiCall(a)}},{key:"ListScoresAroundPlayer",value:function(t,a,e){e=(e=e||{})instanceof d?e:this.paging,t=t||0,a=a||0;var r=new l(this.api.appID,this.api.appSecret,t,a,this.data,e);return this.ApiCall(r)}},{key:"CountScores",value:function(){var t=new o(this.api.appID,this.api.appSecret,this.data);return this.ApiCall(t)}},{key:"ListScoresOfFriends",value:function(t){t=(t=t||{})instanceof d?t:this.paging;var a=new u(this.api.appID,this.api.appSecret,this.api.player,this.data,t);return this.ApiCall(a)}},{key:"CountScoresOfFriends",value:function(){var t=new y(this.api.appID,this.api.appSecret,this.api.player,this.data);return this.ApiCall(t)}},{key:"GetScore",value:function(){var t=new D(this.api.appID,this.api.appSecret,this.api.player.playerID,this.api.character.characterID,this.data);return this.ApiCall(t)}},{key:"GetScoreOfPlayer",value:function(t,a){t=t||0,a=a||0;var e=new D(this.api.appID,this.api.appSecret,t,a,this.data);return this.ApiCall(e)}},{key:"AddScore",value:function(t){if(null===(t=parseFloat(t)||null))return Promise.reject("Provide a score");var a=new f(this.api.appID,this.api.appSecret,this.api.player,this.api.character.characterID,this.data,t);return this.ApiCall(a)}}]),p}(P),N=function t(e,r,i,p){a(this,t),this.appID=e,this.appSecret=r,this.controller="Friends",this.action="Add",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.friendID=p},b=function t(e,r,i,p){a(this,t),this.appID=e,this.appSecret=r,this.controller="Friends",this.action="AddFromFacebook",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.friendList=p},x=function t(e,r,i,p){a(this,t),this.appID=e,this.appSecret=r,this.controller="Friends",this.action="Remove",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.friendID=p},G=function t(e,r,i,p){a(this,t),this.appID=e,this.appSecret=r,this.controller="Friends",this.action="List",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.page=p.page||1,this.limit=p.limit||0},E=function t(e,r,i){a(this,t),this.appID=e,this.appSecret=r,this.controller="Friends",this.action="Count",this.playerID=i.playerID,this.playerSecret=i.playerSecret},L=function(t){i(p,t);var e=s(p);function p(t,r){var i;return a(this,p),r=r||{},(i=e.call(this,t)).paging=new d(r),i}return r(p,[{key:"AddFriend",value:function(t){if(null===(t=parseInt(t)||null))return Promise.reject("Provide a friendID");var a=new N(this.api.appID,this.api.appSecret,this.api.player,t);return this.ApiCall(a)}},{key:"RemoveFriend",value:function(t){if(null===(t=parseInt(t)||null))return Promise.reject("Provide a friendID");var a=new x(this.api.appID,this.api.appSecret,this.api.player,t);return this.ApiCall(a)}},{key:"AddFriendsFromFacebook",value:function(t){if(Array.isArray(t)){var a=new b(this.api.appID,this.api.appSecret,this.api.player,t);return this.ApiCall(a)}return Promise.reject("friendList must be of type array!")}},{key:"ListFriends",value:function(t){t=(t=t||{})instanceof d?t:this.paging;var a=new G(this.api.appID,this.api.appSecret,this.api.player,t);return this.ApiCall(a)}},{key:"Count",value:function(){var t=new E(this.api.appID,this.api.appSecret,this.api.player);return this.ApiCall(t)}}]),p}(P),j=function(t){i(p,t);var e=s(p);function p(t){return a(this,p),e.call(this,t)}return r(p,[{key:"GetDistance",value:function(t,a,e){if(e=e||"",t instanceof v&&a instanceof v){var r={appID:this.api.appID,appSecret:this.api.appSecret,controller:"CF",action:"GetDistance",latitude1:t.latitude,latitude2:a.latitude,longitude1:t.longitude,longitude2:a.longitude,unit:e};return this.ApiCall(r)}return Promise.reject("Failed api call")}},{key:"GetRandomString",value:function(){var t={appID:this.api.appID,appSecret:this.api.appSecret,controller:"CF",action:"GetRandomString"};return this.ApiCall(t)}},{key:"GetGUID",value:function(){var t={appID:this.api.appID,appSecret:this.api.appSecret,controller:"CF",action:"GetGUID"};return this.ApiCall(t)}}]),p}(P),F=function t(e,r,i,p){a(this,t),this.appID=e,this.appSecret=r,this.controller="Character",this.action="Add",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.characterName=p.characterName,this.characterNameExtra=p.characterNameExtra,this.characterAvatar=p.characterAvatar},O=function t(e,r,i,p){a(this,t),this.appID=e,this.appSecret=r,this.controller="Character",this.action="Update",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.characterID=p.characterID,this.characterName=p.characterName,this.characterNameExtra=p.characterNameExtra,this.characterAvatar=p.characterAvatar},U=function t(e,r,i,p){a(this,t),this.appID=e,this.appSecret=r,this.controller="Character",this.action="Get",this.playerID=i,this.characterID=p},R=function t(e,r,i,p){a(this,t),this.appID=e,this.appSecret=r,this.controller="Character",this.action="List",this.playerID=i,this.page=p.page,this.limit=p.limit},_=function t(e,r,i){a(this,t),this.appID=e,this.appSecret=r,this.controller="Character",this.action="Count",this.playerID=i},K=function(t){i(p,t);var e=s(p);function p(t,r){var i;return a(this,p),r=r||{},(i=e.call(this,t)).paging=new d(r),i}return r(p,[{key:"AddCharacter",value:function(t){if(!((t=t||{})instanceof S))return Promise.reject("Provide a character");if(0!=t.characterID)return Promise.reject("Provide a new character. CharacterID must be 0");var a=new F(this.api.appID,this.api.appSecret,this.api.player,t);return this.ApiCall(a)}},{key:"UpdateCharacter",value:function(t){(t=t||{})instanceof S||(t=this.api.character);var a=new O(this.api.appID,this.api.appSecret,this.api.player,t);return this.ApiCall(a)}},{key:"GetCharacter",value:function(t){t=t||this.api.character.characterID;var a=new U(this.api.appID,this.api.appSecret,this.api.player.playerID,t);return this.ApiCall(a)}},{key:"SetCharacter",value:function(t){var a=this;if(0==(t=t||0)){this.api.character.characterID=0,this.api.character.characterName="",this.api.character.characterNameExtra="",this.api.character.characterAvatar="";return Promise.resolve({success:!0})}var e=new U(this.api.appID,this.api.appSecret,this.api.player.playerID,t);return this.ApiCall(e).then((function(t){return t.success&&(a.api.character.characterID=t.character.characterID,a.api.character.characterName=t.character.characterName,a.api.character.characterNameExtra=t.character.characterNameExtra,a.api.character.characterAvatar=t.character.characterAvatar),t}))}},{key:"GetCharacterOfPlayer",value:function(t,a){t=t||this.api.player.playerID,a=a||this.api.character.characterID;var e=new U(this.api.appID,this.api.appSecret,t,a);return this.ApiCall(e)}},{key:"ListCharacters",value:function(t){t=(t=t||{})instanceof d?t:this.paging;var a=new R(this.api.appID,this.api.appSecret,this.api.player.playerID,t);return this.ApiCall(a)}},{key:"CountCharacters",value:function(){var t=new _(this.api.appID,this.api.appSecret,this.api.player.playerID);return this.ApiCall(t)}},{key:"ListCharactersOfPlayer",value:function(t,a){t=t||this.api.player.playerID,a=(a=a||{})instanceof d?a:this.paging;var e=new R(this.api.appID,this.api.appSecret,t,a);return this.ApiCall(e)}},{key:"CountCharactersOfPlayer",value:function(t){t=t||this.api.player.playerID;var a=new _(this.api.appID,this.api.appSecret,t);return this.ApiCall(a)}}]),p}(P),T=function t(e,r,i){a(this,t),this.appID=e,this.appSecret=r,this.controller="PlayerProfile",this.action="Update",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.displayName=i.displayName,this.displayNameExtra=i.displayNameExtra,this.avatar=i.avatar},M=function t(e,r,i){a(this,t),this.appID=e,this.appSecret=r,this.controller="PlayerProfile",this.action="Get",this.playerID=i},W=function t(e,r,i,p){a(this,t),this.appID=e,this.appSecret=r,this.controller="PlayerProfile",this.action="List",this.playerList=i,this.page=p.page||1,this.limit=p.limit||0},B=function t(e,r,i,p){a(this,t),this.appID=e,this.appSecret=r,this.controller="PlayerProfile",this.action="Search",this.search=i,this.page=p.page||1,this.limit=p.limit||0},J=function(t){i(p,t);var e=s(p);function p(t,r){var i;return a(this,p),r=r||{},(i=e.call(this,t)).paging=new d(r),i}return r(p,[{key:"UpdateProfile",value:function(){var t=new T(this.api.appID,this.api.appSecret,this.api.player);return this.ApiCall(t)}},{key:"GetProfile",value:function(){var t=new M(this.api.appID,this.api.appSecret,this.api.player.playerID);return this.ApiCall(t)}},{key:"GetProfileOfPlayer",value:function(t){t=t||this.api.player.playerID;var a=new M(this.api.appID,this.api.appSecret,t);return this.ApiCall(a)}},{key:"ListProfilesOfPlayers",value:function(t,a){if(Array.isArray(t)){a=(a=a||{})instanceof d?a:this.paging;var e=new W(this.api.appID,this.api.appSecret,t,a);return this.ApiCall(e)}return Promise.reject("playerList must be of type array!")}},{key:"Search",value:function(t,a){a=(a=a||{})instanceof d?a:this.paging,t=t||"";var e=new B(this.api.appID,this.api.appSecret,t,a);return this.ApiCall(e)}}]),p}(P),X=function(t){i(p,t);var e=s(p);function p(t){return a(this,p),e.call(this,t)}return r(p,[{key:"GetName",value:function(){return 0==this.api.character.characterID||""==this.api.character.characterName?this.api.player.displayName:this.api.character.characterName}},{key:"GetNameExtra",value:function(){return 0==this.api.character.characterID||""==this.api.character.characterNameExtra?this.api.player.displayNameExtra:this.api.character.characterNameExtra}},{key:"GetAvatar",value:function(){return 0==this.api.character.characterID||""==this.api.character.characterAvatar?this.api.player.avatar:this.api.character.characterAvatar}}]),p}(P),q=function t(e,r,i,p,n){a(this,t),this.appID=e,this.appSecret=r,this.controller="CloudData",this.action="SetAppData",this.dataKey=i,this.value=p,this.writeLock=n,this.privacy=0},z=function t(e,r,i){a(this,t),this.appID=e,this.appSecret=r,this.controller="CloudData",this.action="GetAppData",this.dataKey=i},H=function t(e,r,i,p,n,c,s,h){a(this,t),this.appID=e,this.appSecret=r,this.controller="CloudData",this.action="SetPlayerData",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.characterID=p,this.dataKey=n,this.value=c,this.writeLock=s,this.privacy=h},Q=function t(e,r,i,p,n){a(this,t),this.appID=e,this.appSecret=r,this.controller="CloudData",this.action="GetPlayerData",this.playerID=i.playerID,this.playerSecret=i.playerSecret,this.characterID=p,this.dataKey=n},V=function t(e,r,i,p,n){a(this,t),this.appID=e,this.appSecret=r,this.controller="CloudData",this.action="GetPlayerDataByID",this.playerID=i,this.characterID=p,this.dataKey=n},Y=function(t){i(p,t);var e=s(p);function p(t){return a(this,p),e.call(this,t)}return r(p,[{key:"SetAppData",value:function(t,a,e){if(a=a||"",e=e||0,""===(t=t||""))return Promise.reject("Provide a key");var r=new q(this.api.appID,this.api.appSecret,t,a,e);return this.ApiCall(r)}},{key:"GetAppData",value:function(t){if(""===(t=t||""))return Promise.reject("Provide a key");var a=new z(this.api.appID,this.api.appSecret,t);return this.ApiCall(a)}},{key:"SetData",value:function(t,a,e,r){if(a=a||"",e=e||0,r=r||-1,""===(t=t||""))return Promise.reject("Provide a key");var i=new H(this.api.appID,this.api.appSecret,this.api.player,this.api.character.characterID,t,a,e,r);return this.ApiCall(i)}},{key:"SetCharacterData",value:function(t,a,e,r,i){if(a=a||0,e=e||"",r=r||0,i=i||-1,""===(t=t||""))return Promise.reject("Provide a key");var p=new H(this.api.appID,this.api.appSecret,this.api.player,a,t,e,r,i);return this.ApiCall(p)}},{key:"SetPlayerData",value:function(t,a,e,r){if(a=a||"",e=e||0,r=r||-1,""===(t=t||""))return Promise.reject("Provide a key");var i=new H(this.api.appID,this.api.appSecret,this.api.player,0,t,a,e,r);return this.ApiCall(i)}},{key:"GetData",value:function(t){if(""===(t=t||""))return Promise.reject("Provide a key");var a=new Q(this.api.appID,this.api.appSecret,this.api.player,this.api.character.characterID,t);return this.ApiCall(a)}},{key:"GetCharacterData",value:function(t,a){if(a=a||0,""===(t=t||""))return Promise.reject("Provide a key");var e=new Q(this.api.appID,this.api.appSecret,this.api.player,a,t);return this.ApiCall(e)}},{key:"GetPlayerData",value:function(t){if(""===(t=t||""))return Promise.reject("Provide a key");var a=new Q(this.api.appID,this.api.appSecret,this.api.player,0,t);return this.ApiCall(a)}},{key:"GetCharacterDataOfPlayer",value:function(t,a,e){if(a=a||0,e=e||0,""===(t=t||""))return Promise.reject("Provide a key");var r=new V(this.api.appID,this.api.appSecret,a,e,t);return this.ApiCall(r)}},{key:"GetPlayerDataOfPlayer",value:function(t,a){if(a=a||0,""===(t=t||""))return Promise.reject("Provide a key");var e=new V(this.api.appID,this.api.appSecret,a,0,t);return this.ApiCall(e)}}]),p}(P),Z=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a(this,t),this.appID=e,this.appSecret=r,this.player=new I,this.character=new S,this.url="https://api01.cloudonaut.com/index.php"}return r(t,[{key:"Auth",value:function(){return new w(this)}},{key:"CF",value:function(){return new j(this)}},{key:"Friend",value:function(){return new L(this)}},{key:"Leaderboard",value:function(t,a){return new g(this,t,a)}},{key:"Character",value:function(t){return new K(this,t)}},{key:"PlayerProfile",value:function(){return new J(this)}},{key:"Player",value:function(){return new X(this)}},{key:"CloudData",value:function(){return new Y(this)}}]),t}();t.API=Z,t.Character=S,t.CloudData=function t(e){a(this,t),e=e||{},this.dataKey=e.dataKey||"",this.value=e.value||0,this.privacy=e.privacy||1,this.writeLock=e.writeLock||0},t.GeoPoint=v,t.Leaderboard=h,t.Paging=d,t.Player=I}));
//# sourceMappingURL=cloudonaut.min.js.map
